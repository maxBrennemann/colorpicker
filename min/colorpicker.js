class Colorpicker{constructor(t){this.canvas=this.createHiDPICanvas(300,200),this.canvasContext=this.canvas.getContext("2d"),this.colorCanvas,this.colorContext,this.backgroundGradient,this.mousePos={x:100,y:100},this.foregroundColor="cyan",this.colorDiv,this.colorSpan,this.color,this.isDown=!1,this.parentNode=t,this.initialize=function(){this.loadHTML(),this.applyEventListeners(this.canvas),this.applyStyle(this.canvas),t.appendChild(this.canvas),this.createForegroundColor(),this.createBackgroundGradient(),this.createForegroundSelector(),this.colorDiv=document.createElement("div"),this.colorDiv.style.width="100px",this.colorDiv.style.height="100px",this.colorDiv.style.marginLeft="10px",this.colorDiv.style.borderRadius="6px",t.appendChild(this.colorDiv),this.colorSpan=document.createElement("span"),t.appendChild(this.colorSpan)},this.initialize()}createBackgroundGradient(){null==this.backgroundGradient&&(this.backgroundGradient=this.canvasContext.createLinearGradient(0,0,0,200),this.backgroundGradient.addColorStop(0,"transparent"),this.backgroundGradient.addColorStop(1,"black")),this.canvasContext.fillStyle=this.backgroundGradient,this.canvasContext.fillRect(0,0,300,200)}createForegroundColor(){var t=this.canvasContext.createLinearGradient(0,0,300,0);t.addColorStop(0,"white"),t.addColorStop(1,this.foregroundColor),this.canvasContext.fillStyle=t,this.canvasContext.fillRect(0,0,300,200)}createForegroundSelector(t=null){this.colorCanvas=document.createElement("canvas"),this.colorCanvas.width=600,this.colorCanvas.height=10,this.colorContext=this.colorCanvas.getContext("2d"),this.applyStyle(this.colorCanvas);var e=document.createElement("div");e.classList.add("sliderContainer"),e.appendChild(this.colorCanvas),null!=t?t.appendChild(e):this.parentNode.appendChild(e),this.drawForegroundSelectorGradient(),this.createSlider(e)}applyStyle(t){t.style.borderRadius="6px",t.style.display="block",t.style.margin="10px"}drawForegroundSelectorGradient(){var t=this.colorContext.createLinearGradient(0,0,600,0);t.addColorStop(0,"red"),t.addColorStop(1/6,"yellow"),t.addColorStop(2/6,"lime"),t.addColorStop(.5,"cyan"),t.addColorStop(4/6,"blue"),t.addColorStop(5/6,"magenta"),t.addColorStop(1,"red"),this.colorContext.fillStyle=t,this.colorContext.fillRect(0,0,600,10)}createSlider(t){var e=document.createElement("input");e.type="range",e.classList.add("slider"),e.min="1",e.max="600",e.value="300";var o=this;e.oninput=(function(t){var e=t.target.value,i=o.colorContext.getImageData(e,5,1,1).data;o.foregroundColor=`rgb(${i[0]}, ${i[1]}, ${i[2]})`,o.outputColor()}).bind(o),t.appendChild(e)}applyEventListeners(){this.canvas.addEventListener("mousedown",(function(t){this.isDown=!0}).bind(this),!1),this.canvas.addEventListener("mousemove",(function(t){console.log(this.isDown),this.isDown&&this.outputColor(this.canvas)}).bind(this),!1),this.canvas.addEventListener("mouseup",(function(t){this.isDown=!1}).bind(this),!1)}outputColor(t){this.createForegroundColor(),this.createBackgroundGradient(),this.mousePos=null==t?this.mousePos:this.getMousePos(t,event),this.createCircles();var e=this.canvasContext.getImageData(this.mousePos.x*this.PIXEL_RATIO,this.mousePos.y*this.PIXEL_RATIO,1,1).data;this.color=function t(e,o,i){if(e>255||o>255||i>255)throw"Invalid color component";return(e<<16|o<<8|i).toString(16)}(e[0],e[1],e[2]),this.colorDiv.style.background=`rgb(${e[0]}, ${e[1]}, ${e[2]})`,this.colorSpan.innerHTML=`#${this.color.toUpperCase()}<br>rgb(${e[0]}, ${e[1]}, ${e[2]})`}createCircles(){this.canvasContext.beginPath(),this.canvasContext.arc(this.mousePos.x,this.mousePos.y,5,0,2*Math.PI),this.canvasContext.lineWidth=3,this.canvasContext.strokeStyle="white",this.canvasContext.stroke(),this.canvasContext.beginPath(),this.canvasContext.arc(this.mousePos.x,this.mousePos.y,8,0,2*Math.PI),this.canvasContext.lineWidth=3,this.canvasContext.strokeStyle="#2e2e2e",this.canvasContext.stroke()}loadHTML(){var t=document.createElement("style");t.innerHTML=`
        .sliderContainer {
            position: relative;
        }

        .slider {
            width: 600px;
            margin: 10px;
            position: absolute;
            top: -15px;
            -webkit-appearance: none;
            background: rgba(0,0,0,0);
        }

        .slider:focus {
            outline: 0;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none; /* Override default look */
            appearance: none;
            width: 10px;
            height: 20px;
            background: rgb(80, 80, 80); /* Green background */
            border-radius: 3px;
            cursor: pointer; /* Cursor on hover */
        }`,document.body.appendChild(t)}getMousePos(t,e){var o=t.getBoundingClientRect();return{x:e.clientX-o.left,y:e.clientY-o.top}}createHiDPICanvas(t,e,o){o||(o=this.PIXEL_RATIO);var i=document.createElement("canvas");return i.width=t*o,i.height=e*o,i.style.width=t+"px",i.style.height=e+"px",i.getContext("2d").setTransform(o,0,0,o,0,0),i}}Colorpicker.prototype.PIXEL_RATIO=function(){var t,e=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)}();